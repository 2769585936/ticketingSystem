# 购买电影票网站

使用的是Vue 3 +pinia

[项目地址](http://8.148.21.126/index)

账号 17720349026
密码 12345678

## 安装依赖包

```sh
npm install
```

### 启动项目

```sh
npm run dev
```

### 打包项目

```sh
npm run build
```


### 第一天
  在设计选择影院界面时,我最开始想把海报放在最上面 把详情放在海报下面 可以通过滚轮移动到海报上并添加一层高斯模糊蒙版 ,但是在写的过程中发现 详情会移动到top 0 的位置 把海报盖住了还过了一部分 ,滚动过多了 后面又设置了staick, 发现footer 版权去 把影城盖住了, 所以这个结构又问题  因该分成三个部分 -->> 
  首先单独写海报区 让他 staick top 80 
  详情去要和选择影院区分开 应该是跟 footer 版权区 一个层级  把详情区 设置 staick top 80 这样移动正好可以把海报区盖住 显示高斯模糊
  最后 把选择影院区 不要设置 staick  这样 向上滚动时 footer 不会盖住 选择影院区 而且 向上滚动时 遇到详情区会被盖住 但是可以移动过去 从而实现效过  不过详情去就不能设置跟选择影院区一样的背景颜色了  也就是功能实现了 但是效果很丑  也有解决办法 不过多阐述了 就是全部先放到一个容器中设置一个背景颜色就行

  不过这样写会导致进入界面显示选择影院区内容过少 导致界面不好看  所以我选择把 海报跟详情区合在一起 这样效果也还不错
  
  第一天总结: 一个好的布局可以解决很多事情, 写完后发现布局不好 向再去改会很麻烦 很容易改错 不过养成每个容器都写class 并且在scss 中嵌套写法  比较方便转移布局   用标签选择器可能会出现不必要的问题 所以少用标签选择器 对后续扩展有好处


  ### 第二天
  对grid布局进一步认知 使用更加熟练 grid 使用了 gap 分配间距了之后 不能在单独设置间距了 用margin都不行 暂时没有找到太好的办法

### 第三天
  今天研究了一下响应式 发现大部分的网站都是没有完全兼容 一般都在兼容到768 
  移动端在写一套样式  并不是用pc去兼容移动 
  除非很有精力去做全部的兼容
  就是写了很多媒体查询去做的

### 第四天
  一晃就写了四天了 前台大部分布局都完成了 还有一些样式没改等连通数据库了在改
  自定义主题导入 需要把  [ElementPlusResolver({ importStyle: 'sass' })] 要加入 { importStyle: 'sass' } 才行
  原生input框 本身的阴影盒子跟 input 高度不相等 可以加入 height:fit-content  font: inherit;  都加上试试
  最开始写样式的时候 还是得要把样式全部重置会好一点 
  加油!!!!

  ### 第10天
  登录页弄完了 服务器也在逐渐走上正规 尽管服务器和数据库写的不是很好 好歹也能把我想要的数据发回来 凑合用
  缓存路由 使用的用法 
  ```
  <router-view v-slot="{ Component }">
        <keep-alive>
          <component :is="Component" />
        </keep-alive>
  </router-view>
  ```
  <router-view v-slot="{ Component }">
        <keep-alive>
          <component :is="Component" />
        </keep-alive>
  </router-view>

  ### 2个礼拜后
  性能优化  可以采用图片懒加载, 图片较多的并且切换频率比较勤快的不要用v-if 这样会导致重复请求图片 可以采用v-show 来进行切换 做一个加载
  
  我的需求是:图片开没开始加载的时候,盒模型就有高度了,高度由宽度自适应,并且有一个背景颜色,图片进行加载后图片会显示

  难点: 图片没有加载的时候 盒模型的高度为0 
  解决办法: 参考b站   包含块宽度是由grid 或 flex 提供的 所以是由width的, padding-top 百分比写法 % 是根据包含块的width 进行计算的 所以 只要给包含块设置一个padding-top %  具体多少 自己计算  由于设置了padding-top  再在盒子里设置内容 会导致宽度更大, 应该采用定位的方法去解决这个问题  这样就得到了一个由宽度自适应的盒模型了


### 后续更新
  头像裁剪上传:用户上传图片本地显示,进行选择裁剪区域获取坐标,在canvas中画出裁剪区域,生成blob数据 创建File对象 进行ajax上传
  1. 用户进行文件上传 判断文件数据,通过FileRead对象 读取文件,生成base64文件,在本地进行展示
  2. 在其中要通过Image对象 获取 原始图片的宽高 img.naturalWidth 原始宽img.naturalHeight原始高
  3. 在界面上进行展示,展现宽高由短边进行确定
  4. 裁剪框的定位属性宽高相等,由图片展示的短边决定
  5. 用canvas 裁剪图片, 裁剪位置和裁剪大小 要计算原始图片尺寸
  6. 通过canvas的 toDataURL可以获取裁剪后的base64图片显示在页面上供用户预览
  7. 点击更新且canvas有值,canvas.toBlob 可以生成blob数据,通过数据创建file文件
  8. 创建一个FormData对象 append file文件 进行ajax上传
  9. 上传成功 更新pinia中的用户信息

### 后面要创建这个项目的后台管理系统
